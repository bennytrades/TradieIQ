<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradie Note AI - Smart Job Management for Australian Trades</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; }
        
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(10px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { 
            from { transform: translateX(-20px); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }
        
        .pulse-record { animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        
        .tab-active { 
            border-bottom: 2px solid #3b82f6; 
            color: #3b82f6; 
        }
        
        .material-card { transition: all 0.2s; }
        .material-card:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); 
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 16px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
            z-index: 1000;
            animation: slideInRight 0.3s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .audio-wave {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }
        
        .audio-bar {
            width: 3px;
            background: #ef4444;
            animation: wave 1s ease-in-out infinite;
        }
        
        .audio-bar:nth-child(2) { animation-delay: 0.1s; }
        .audio-bar:nth-child(3) { animation-delay: 0.2s; }
        .audio-bar:nth-child(4) { animation-delay: 0.3s; }
        .audio-bar:nth-child(5) { animation-delay: 0.4s; }
        
        @keyframes wave {
            0%, 100% { height: 8px; }
            50% { height: 20px; }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f3f4f6; }
        ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Notification Toast -->
    <div id="notification" class="notification">
        <div class="flex items-center gap-3">
            <i class="fas fa-check-circle text-green-500"></i>
            <div>
                <p class="font-medium text-gray-900" id="notificationTitle">Success!</p>
                <p class="text-sm text-gray-600" id="notificationMessage">Action completed successfully.</p>
            </div>
        </div>
    </div>

    <!-- Sign In View -->
    <div id="signInView" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md fade-in">
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-full mb-4 shadow-lg">
                    <i class="fas fa-clipboard-check text-white text-2xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-900">Welcome to Tradie Note AI</h1>
                <p class="text-gray-600 mt-2">Smart job management for Australian trades</p>
            </div>

            <form onsubmit="event.preventDefault(); showView('dashboard');">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <div class="relative">
                            <i class="fas fa-envelope absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="email" placeholder="your@email.com" required
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <div class="relative">
                            <i class="fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                            <input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required
                                class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2 rounded text-blue-600">
                            <span class="text-sm text-gray-600">Remember me</span>
                        </label>
                        <a href="#" class="text-sm text-blue-600 hover:text-blue-700">Forgot password?</a>
                    </div>
                </div>

                <button type="submit" 
                    class="w-full mt-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition shadow-md">
                    Sign In
                </button>
            </form>

            <div class="relative my-6">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-gray-300"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-2 bg-white text-gray-500">Or continue with</span>
                </div>
            </div>

            <button onclick="showView('dashboard')" 
                class="w-full flex items-center justify-center gap-3 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                <svg class="w-5 h-5" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Sign in with Google
            </button>

            <p class="text-center mt-6 text-sm text-gray-600">
                Don't have an account? 
                <a href="#" onclick="showNotification('Sign Up', 'Registration coming soon!')" class="text-blue-600 hover:text-blue-700 font-medium">Sign up</a>
            </p>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboardView" class="hidden h-screen flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <!-- Logo -->
            <div class="p-4 border-b">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center shadow">
                        <i class="fas fa-clipboard-check text-white"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-900">Tradie Note AI</h2>
                        <p class="text-xs text-gray-500">Smart Job Management</p>
                    </div>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b">
                <div class="flex justify-around text-center">
                    <div>
                        <div class="text-lg font-bold text-gray-900">12</div>
                        <div class="text-xs text-gray-600">Active</div>
                    </div>
                    <div class="border-l border-gray-300"></div>
                    <div>
                        <div class="text-lg font-bold text-gray-900">5</div>
                        <div class="text-xs text-gray-600">Quotes</div>
                    </div>
                    <div class="border-l border-gray-300"></div>
                    <div>
                        <div class="text-lg font-bold text-gray-900">3</div>
                        <div class="text-xs text-gray-600">Today</div>
                    </div>
                </div>
            </div>

            <!-- Search -->
            <div class="p-4">
                <div class="relative">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" placeholder="Search jobs..." 
                        onkeyup="searchJobs(this.value)"
                        class="w-full pl-10 pr-3 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            
            <!-- New Job Button -->
            <div class="px-4 pb-4">
                <button onclick="createNewJob()" 
                    class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-2 rounded-lg font-medium hover:from-blue-700 hover:to-indigo-700 transition shadow flex items-center justify-center gap-2">
                    <i class="fas fa-plus"></i>
                    New Job
                </button>
            </div>

            <!-- Jobs List -->
            <div class="flex-1 overflow-y-auto px-2">
                <div class="text-xs font-semibold text-gray-500 uppercase px-3 mb-2">Recent Jobs</div>
                <div id="jobsList" class="space-y-1">
                    <!-- Jobs will be populated here -->
                </div>
            </div>

            <!-- User Menu -->
            <div class="p-4 border-t bg-gray-50">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center">
                        <span class="text-white font-bold">MP</span>
                    </div>
                    <div class="flex-1">
                        <div class="text-sm font-medium text-gray-900">Mike's Plumbing</div>
                        <div class="text-xs text-gray-500">mike@plumbing.au</div>
                    </div>
                    <button onclick="showView('signIn')" class="text-gray-400 hover:text-gray-600 transition">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 bg-gradient-to-br from-gray-50 to-blue-50 overflow-auto">
            <div class="p-8">
                <div class="max-w-7xl mx-auto">
                    <!-- Welcome Header -->
                    <div class="mb-8 fade-in">
                        <h1 class="text-4xl font-bold text-gray-900 mb-2">Welcome back, Mike! ðŸ‘‹</h1>
                        <p class="text-gray-600 text-lg">You have <span class="font-semibold text-blue-600">3 active jobs</span> and <span class="font-semibold text-yellow-600">2 pending quotes</span> today</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-gray-500 text-sm font-medium">This Week</span>
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-chart-line text-green-600"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-gray-900">$12,450</div>
                            <div class="flex items-center gap-1 mt-2">
                                <i class="fas fa-arrow-up text-green-500 text-xs"></i>
                                <span class="text-xs text-green-600 font-medium">23% from last week</span>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-gray-500 text-sm font-medium">Active Jobs</span>
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-briefcase text-blue-600"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-gray-900">8</div>
                            <div class="text-xs text-gray-600 mt-2">3 due this week</div>
                        </div>

                        <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-gray-500 text-sm font-medium">Pending Quotes</span>
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-file-invoice text-yellow-600"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-gray-900">5</div>
                            <div class="text-xs text-gray-600 mt-2">Worth $8,200</div>
                        </div>

                        <div class="bg-white rounded-xl p-6 border border-gray-200 shadow-sm hover:shadow-md transition">
                            <div class="flex items-center justify-between mb-3">
                                <span class="text-gray-500 text-sm font-medium">Completed</span>
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-check-circle text-purple-600"></i>
                                </div>
                            </div>
                            <div class="text-3xl font-bold text-gray-900">24</div>
                            <div class="text-xs text-gray-600 mt-2">This month</div>
                        </div>
                    </div>

                    <!-- Recent Activity & Upcoming -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recent Activity -->
                        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
                            <div class="p-6 border-b">
                                <div class="flex items-center justify-between">
                                    <h2 class="text-lg font-semibold text-gray-900">Recent Activity</h2>
                                    <span class="text-xs text-gray-500">Last 24 hours</span>
                                </div>
                            </div>
                            <div class="p-6 space-y-4 max-h-96 overflow-y-auto">
                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-check text-green-600 text-xs"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900">Completed kitchen renovation</p>
                                        <p class="text-xs text-gray-500 mt-1">Sarah Mitchell â€¢ 2 hours ago</p>
                                    </div>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-microphone text-blue-600 text-xs"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900">New audio transcription added</p>
                                        <p class="text-xs text-gray-500 mt-1">John's Cafe â€¢ 5 hours ago</p>
                                    </div>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-file-alt text-yellow-600 text-xs"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900">Quote sent - $4,500</p>
                                        <p class="text-xs text-gray-500 mt-1">Brisbane Tower â€¢ Yesterday</p>
                                    </div>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-star text-purple-600 text-xs"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-900">5-star review received</p>
                                        <p class="text-xs text-gray-500 mt-1">Residential Complex â€¢ 2 days ago</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Upcoming Schedule -->
                        <div class="bg-white rounded-xl border border-gray-200 shadow-sm">
                            <div class="p-6 border-b">
                                <div class="flex items-center justify-between">
                                    <h2 class="text-lg font-semibold text-gray-900">Today's Schedule</h2>
                                    <span class="text-xs text-gray-500">Wednesday, 3 Sep</span>
                                </div>
                            </div>
                            <div class="p-6 space-y-4 max-h-96 overflow-y-auto">
                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="text-xs text-gray-500 font-medium w-16">8:00 AM</div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-900">Grease trap service</p>
                                        <p class="text-xs text-gray-500">John's Cafe â€¢ 88 George St</p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded">On-site</span>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="text-xs text-gray-500 font-medium w-16">10:30 AM</div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-900">Initial consultation</p>
                                        <p class="text-xs text-gray-500">New Client â€¢ 42 Queen St</p>
                                    </div>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded">Scheduled</span>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="text-xs text-gray-500 font-medium w-16">2:00 PM</div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-900">Pipe inspection</p>
                                        <p class="text-xs text-gray-500">Brisbane Tower â€¢ Level 15</p>
                                    </div>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded">Pending</span>
                                </div>

                                <div class="flex items-start gap-3 hover:bg-gray-50 p-2 rounded transition">
                                    <div class="text-xs text-gray-500 font-medium w-16">4:30 PM</div>
                                    <div class="flex-1">
                                        <p class="text-sm font-medium text-gray-900">Quote follow-up</p>
                                        <p class="text-xs text-gray-500">Phone call â€¢ Sarah Mitchell</p>
                                    </div>
                                    <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded">Reminder</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Job Detail View -->
    <div id="jobDetailView" class="hidden h-screen flex">
        <!-- Reuse Sidebar (simplified for job view) -->
        <aside class="w-64 bg-white border-r border-gray-200 flex flex-col">
            <div class="p-4 border-b">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center shadow">
                        <i class="fas fa-clipboard-check text-white"></i>
                    </div>
                    <div>
                        <h2 class="font-bold text-gray-900">Tradie Note AI</h2>
                        <p class="text-xs text-gray-500">Job Details</p>
                    </div>
                </div>
            </div>

            <div class="p-4">
                <button onclick="showView('dashboard')" 
                    class="w-full text-left px-3 py-2 text-sm text-gray-600 hover:bg-gray-50 rounded-lg transition flex items-center gap-2">
                    <i class="fas fa-arrow-left"></i>
                    Back to Dashboard
                </button>
            </div>

            <!-- Job Info Summary -->
            <div class="p-4">
                <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-900 text-sm mb-2">Job Summary</h3>
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Created:</span>
                            <span class="font-medium">2 days ago</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Last Updated:</span>
                            <span class="font-medium">Today</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Total Value:</span>
                            <span class="font-bold text-green-600">$781</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="p-4 space-y-2">
                <button onclick="showNotification('Email Sent', 'Quote emailed to client')" 
                    class="w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-2">
                    <i class="fas fa-envelope text-gray-600"></i>
                    Email Quote
                </button>
                <button onclick="showNotification('PDF Generated', 'Quote saved to downloads')" 
                    class="w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-2">
                    <i class="fas fa-file-pdf text-gray-600"></i>
                    Export PDF
                </button>
                <button onclick="showNotification('Reminder Set', 'Follow-up scheduled for tomorrow')" 
                    class="w-full text-left px-3 py-2 text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition flex items-center gap-2">
                    <i class="fas fa-bell text-gray-600"></i>
                    Set Reminder
                </button>
            </div>
        </aside>

        <!-- Job Content -->
        <main class="flex-1 flex flex-col bg-gray-50">
            <!-- Job Header -->
            <header class="bg-white border-b px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900" id="jobClientName">John's Cafe</h1>
                        <p class="text-gray-600" id="jobAddress">88 George St, Sydney NSW 2000</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <select id="jobStatus" onchange="updateJobStatus(this.value)" class="px-3 py-2 border border-gray-300 rounded-lg text-sm">
                            <option value="new">New</option>
                            <option value="quoted">Quoted</option>
                            <option value="in_progress" selected>In Progress</option>
                            <option value="completed">Completed</option>
                        </select>
                        <button onclick="saveJob()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2">
                            <i class="fas fa-save"></i>
                            Save
                        </button>
                    </div>
                </div>
            </header>

            <!-- Audio Controls -->
            <div class="bg-white px-6 py-4 border-b">
                <div class="flex items-center justify-between">
                    <div class="flex gap-4">
                        <button id="recordBtn" onclick="toggleRecording()" 
                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center gap-2">
                            <i class="fas fa-microphone" id="recordIcon"></i>
                            <span id="recordText">Start Recording</span>
                            <div class="audio-wave hidden" id="audioWave">
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                                <div class="audio-bar"></div>
                            </div>
                        </button>
                        <button onclick="document.getElementById('audioUpload').click()" 
                            class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition flex items-center gap-2">
                            <i class="fas fa-upload"></i>
                            Upload Audio
                        </button>
                        <input type="file" id="audioUpload" accept="audio/*" style="display:none" onchange="handleAudioUpload(event)">
                        
                        <button onclick="summarizeWithAI()" 
                            class="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition flex items-center gap-2">
                            <i class="fas fa-magic"></i>
                            Summarize with AI
                        </button>
                    </div>
                    
                    <div id="recordingTimer" class="hidden text-red-600 font-mono text-lg">
                        <i class="fas fa-circle text-red-600 animate-pulse"></i>
                        <span id="recordingTime">00:00</span>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="bg-white border-b">
                <div class="px-6">
                    <nav class="flex space-x-8">
                        <button onclick="switchTab('transcript')" class="tab-btn py-3 text-sm font-medium tab-active" data-tab="transcript">
                            <i class="fas fa-file-alt mr-2"></i>Transcript
                        </button>
                        <button onclick="switchTab('summary')" class="tab-btn py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="summary">
                            <i class="fas fa-list-check mr-2"></i>Summary
                        </button>
                        <button onclick="switchTab('tasks')" class="tab-btn py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="tasks">
                            <i class="fas fa-tasks mr-2"></i>Tasks
                            <span class="ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full">4</span>
                        </button>
                        <button onclick="switchTab('materials')" class="tab-btn py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="materials">
                            <i class="fas fa-box mr-2"></i>Materials
                            <span class="ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">3</span>
                        </button>
                        <button onclick="switchTab('quote')" class="tab-btn py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="quote">
                            <i class="fas fa-dollar-sign mr-2"></i>Quote
                        </button>
                        <button onclick="switchTab('files')" class="tab-btn py-3 text-sm font-medium text-gray-500 hover:text-gray-700" data-tab="files">
                            <i class="fas fa-paperclip mr-2"></i>Files
                            <span class="ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full">2</span>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Tab Content -->
            <div class="flex-1 overflow-auto p-6">
                <div class="max-w-5xl mx-auto">
                    <!-- Transcript Tab -->
                    <div id="transcriptTab" class="tab-content">
                        <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-900">Transcript</h3>
                                <div class="flex items-center gap-4">
                                    <span class="text-sm text-gray-500"><span id="wordCount">245</span> words</span>
                                    <button onclick="copyTranscript()" class="text-sm text-blue-600 hover:text-blue-700">
                                        <i class="fas fa-copy mr-1"></i>Copy
                                    </button>
                                </div>
                            </div>
                            <textarea id="transcriptText" onkeyup="updateWordCount()" class="w-full h-96 p-4 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
John: G'day mate, thanks for coming out. So we've got this recurring issue with the kitchen sink - it's been backing up for the past couple of weeks.

Me: No worries, John. Let me have a look. How often is it backing up?

John: Pretty much daily now. We've tried those drain cleaners from Bunnings but they only work for a day or two.

Me: Right, I'll need to check the pipes underneath first. Could be a blockage further down the line. Also, when was the last time you had the grease trap cleaned?

John: Grease trap? Uh, we've been here three years and haven't touched it.

Me: That's likely your problem then. Commercial kitchens need the grease trap cleaned every 3-6 months. I can see it's a 1000L trap out back - definitely needs doing. I'll snake the drain today to get you running, but we'll need to schedule a proper grease trap service.

John: How much are we looking at?

Me: The drain snake today is $180. The grease trap service with proper disposal certificates for council will be around $450. I'd also recommend installing a new basket strainer in the sink - about $80 - to catch more solids before they go down.

John: Alright, let's do the lot. Can you do the grease trap this week?

Me: I can fit you in Thursday morning, first thing. Should take about 2 hours all up.
                            </textarea>
                        </div>
                    </div>

                    <!-- Summary Tab -->
                    <div id="summaryTab" class="tab-content hidden">
                        <div class="space-y-6">
                            <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-clipboard-list mr-2 text-blue-600"></i>Scope of Work
                                </h3>
                                <p class="text-gray-700 leading-relaxed">Commercial kitchen drainage issue at John's Cafe. Daily sink backups requiring immediate drain snake service and overdue grease trap maintenance. Installation of preventive basket strainer recommended to reduce future blockages.</p>
                            </div>

                            <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-map-marker-alt mr-2 text-green-600"></i>Site Notes
                                </h3>
                                <ul class="space-y-2">
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                        <span class="text-gray-700">1000L grease trap located at rear of property</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                        <span class="text-gray-700">No maintenance performed in 3+ years</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                        <span class="text-gray-700">Commercial kitchen with heavy daily use</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-check-circle text-green-500 mt-1"></i>
                                        <span class="text-gray-700">Previous DIY attempts with retail drain cleaners unsuccessful</span>
                                    </li>
                                </ul>
                            </div>

                            <div class="bg-yellow-50 rounded-lg border border-yellow-200 p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>Compliance Requirements
                                </h3>
                                <p class="text-gray-700">Council requires disposal certificates for grease trap waste. Schedule regular 3-month service intervals to maintain compliance. Current installation may require inspection for AS/NZS standards compliance.</p>
                            </div>

                            <div class="bg-red-50 rounded-lg border border-red-200 p-6 shadow-sm">
                                <h3 class="font-semibold text-gray-900 mb-3">
                                    <i class="fas fa-shield-alt text-red-600 mr-2"></i>Risk Assessment
                                </h3>
                                <ul class="space-y-2">
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-times-circle text-red-500 mt-1"></i>
                                        <span class="text-gray-700">Potential for complete blockage if not addressed immediately</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="fas fa-times-circle text-red-500 mt-1"></i>
                                        <span class="text-gray-700">Health code violation risk due to overdue grease trap maintenance</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tasks Tab -->
                    <div id="tasksTab" class="tab-content hidden">
                        <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-900">Action Items</h3>
                                <button onclick="addNewTask()" class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                    <i class="fas fa-plus mr-1"></i>
                                    Add Task
                                </button>
                            </div>

                            <div class="space-y-3" id="tasksList">
                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                    <input type="checkbox" checked class="w-4 h-4 text-blue-600 rounded">
                                    <div class="flex-1">
                                        <p class="text-gray-900 line-through">Snake kitchen drain to clear immediate blockage</p>
                                        <p class="text-xs text-gray-500 mt-1">
                                            <i class="fas fa-calendar-alt mr-1"></i>Due: Today
                                        </p>
                                    </div>
                                    <span class="px-2 py-1 bg-green-100 text-green-700 text-xs rounded font-medium">Completed</span>
                                </div>

                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 rounded">
                                    <div class="flex-1">
                                        <p class="text-gray-900">Service 1000L grease trap with full pump-out</p>
                                        <p class="text-xs text-gray-500 mt-1">
                                            <i class="fas fa-calendar-alt mr-1"></i>Due: Thursday, 8:00 AM
                                        </p>
                                    </div>
                                    <span class="px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded font-medium">Scheduled</span>
                                </div>

                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 rounded">
                                    <div class="flex-1">
                                        <p class="text-gray-900">Install new basket strainer in kitchen sink</p>
                                        <p class="text-xs text-gray-500 mt-1">
                                            <i class="fas fa-calendar-alt mr-1"></i>Due: Thursday
                                        </p>
                                    </div>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded font-medium">Pending</span>
                                </div>

                                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 rounded">
                                    <div class="flex-1">
                                        <p class="text-gray-900">Provide disposal certificates to client</p>
                                        <p class="text-xs text-gray-500 mt-1">
                                            <i class="fas fa-calendar-alt mr-1"></i>Due: Thursday
                                        </p>
                                    </div>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded font-medium">Pending</span>
                                </div>
                            </div>

                            <div class="mt-4 pt-4 border-t">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">Progress</span>
                                    <span class="font-medium">1 of 4 completed</span>
                                </div>
                                <div class="mt-2 w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-blue-600 h-2 rounded-full" style="width: 25%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Materials Tab -->
                    <div id="materialsTab" class="tab-content hidden">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="bg-white rounded-lg border border-gray-200 p-4 material-card">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <div class="flex items-center gap-2 mb-2">
                                            <i class="fas fa-box text-gray-400"></i>
                                            <h4 class="font-medium text-gray-900">Basket Strainer</h4>
                                        </div>
                                        <p class="text-sm text-gray-500">Commercial grade, 90mm</p>
                                        <div class="flex items-center gap-4 mt-3">
                                            <span class="text-xs bg-gray-100 px-2 py-1 rounded">Qty: 1</span>
                                            <span class="text-xs text-gray-500">SKU: PLB-BS-90C</span>
                                        </div>
                                    </div>
                                    <span class="text-lg font-semibold text-green-600">$80</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg border border-gray-200 p-4 material-card">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <div class="flex items-center gap-2 mb-2">
                                            <i class="fas fa-wrench text-gray-400"></i>
                                            <h4 class="font-medium text-gray-900">Grease Trap Service</h4>
                                        </div>
                                        <p class="text-sm text-gray-500">1000L pump-out & disposal</p>
                                        <div class="flex items-center gap-4 mt-3">
                                            <span class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded">Service</span>
                                        </div>
                                    </div>
                                    <span class="text-lg font-semibold text-green-600">$450</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg border border-gray-200 p-4 material-card">
                                <div class="flex items-start justify-between">
                                    <div>
                                        <div class="flex items-center gap-2 mb-2">
                                            <i class="fas fa-tools text-gray-400"></i>
                                            <h4 class="font-medium text-gray-900">Drain Snake Service</h4>
                                        </div>
                                        <p class="text-sm text-gray-500">Emergency callout</p>
                                        <div class="flex items-center gap-4 mt-3">
                                            <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">Completed</span>
                                        </div>
                                    </div>
                                    <span class="text-lg font-semibold text-green-600">$180</span>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-4">
                                <div class="flex items-center justify-center h-full">
                                    <button onclick="showNotification('Add Material', 'Feature coming soon!')" class="text-blue-600 hover:text-blue-700">
                                        <i class="fas fa-plus-circle text-2xl mb-2"></i>
                                        <p class="text-sm font-medium">Add Material</p>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 border border-blue-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <span class="text-gray-700 font-semibold">Total Materials & Services</span>
                                    <p class="text-xs text-gray-600 mt-1">Excluding GST</p>
                                </div>
                                <span class="text-3xl font-bold text-blue-600">$710</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quote Tab -->
                    <div id="quoteTab" class="tab-content hidden">
                        <div class="bg-white rounded-lg border border-gray-200 shadow-sm">
                            <div class="p-6 border-b bg-gradient-to-r from-gray-50 to-blue-50">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="font-semibold text-gray-900 text-xl">Service Quote</h3>
                                        <p class="text-sm text-gray-500 mt-1">Quote #Q-2024-0142</p>
                                        <p class="text-xs text-gray-400 mt-2">Valid until: 17 September 2024</p>
                                    </div>
                                    <div class="flex gap-2">
                                        <button onclick="showNotification('Quote Sent', 'Email sent to client successfully')" 
                                            class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm flex items-center gap-2">
                                            <i class="fas fa-paper-plane"></i>
                                            Send to Client
                                        </button>
                                        <button onclick="showNotification('PDF Downloaded', 'Quote saved to downloads')" 
                                            class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition text-sm flex items-center gap-2">
                                            <i class="fas fa-download"></i>
                                            Download
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="p-6 space-y-6">
                                <!-- Client Details -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="font-medium text-gray-900 mb-3 text-sm">Client Details</h4>
                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <span class="text-gray-600">Business:</span>
                                            <p class="font-medium">John's Cafe</p>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Contact:</span>
                                            <p class="font-medium">John Smith</p>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Address:</span>
                                            <p class="font-medium">88 George St, Sydney NSW 2000</p>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">Phone:</span>
                                            <p class="font-medium">0412 345 678</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Immediate Works -->
                                <div>
                                    <h4 class="font-medium text-gray-900 mb-3">Immediate Works</h4>
                                    <table class="w-full">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="text-left px-4 py-2 text-xs font-medium text-gray-500 uppercase">Description</th>
                                                <th class="text-center px-4 py-2 text-xs font-medium text-gray-500 uppercase">Qty</th>
                                                <th class="text-center px-4 py-2 text-xs font-medium text-gray-500 uppercase">Unit</th>
                                                <th class="text-right px-4 py-2 text-xs font-medium text-gray-500 uppercase">Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b">
                                                <td class="px-4 py-3 text-sm">Drain snake service - kitchen sink</td>
                                                <td class="text-center px-4 py-3 text-sm">1</td>
                                                <td class="text-center px-4 py-3 text-sm">ea</td>
                                                <td class="text-right px-4 py-3 text-sm font-medium">$180.00</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Scheduled Works -->
                                <div>
                                    <h4 class="font-medium text-gray-900 mb-3">Scheduled Works (Thursday)</h4>
                                    <table class="w-full">
                                        <thead class="bg-gray-50">
                                            <tr>
                                                <th class="text-left px-4 py-2 text-xs font-medium text-gray-500 uppercase">Description</th>
                                                <th class="text-center px-4 py-2 text-xs font-medium text-gray-500 uppercase">Qty</th>
                                                <th class="text-center px-4 py-2 text-xs font-medium text-gray-500 uppercase">Unit</th>
                                                <th class="text-right px-4 py-2 text-xs font-medium text-gray-500 uppercase">Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="border-b">
                                                <td class="px-4 py-3 text-sm">Grease trap service (1000L) - includes pump-out & disposal</td>
                                                <td class="text-center px-4 py-3 text-sm">1</td>
                                                <td class="text-center px-4 py-3 text-sm">ea</td>
                                                <td class="text-right px-4 py-3 text-sm font-medium">$450.00</td>
                                            </tr>
                                            <tr class="border-b">
                                                <td class="px-4 py-3 text-sm">Supply & install commercial basket strainer (90mm)</td>
                                                <td class="text-center px-4 py-3 text-sm">1</td>
                                                <td class="text-center px-4 py-3 text-sm">ea</td>
                                                <td class="text-right px-4 py-3 text-sm font-medium">$80.00</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Totals -->
                                <div class="bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-6 border border-blue-200">
                                    <div class="space-y-3">
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600">Subtotal</span>
                                            <span class="font-medium">$710.00</span>
                                        </div>
                                        <div class="flex justify-between text-sm">
                                            <span class="text-gray-600">GST (10%)</span>
                                            <span class="font-medium">$71.00</span>
                                        </div>
                                        <div class="flex justify-between text-lg font-bold pt-3 border-t border-blue-200">
                                            <span>Total Amount</span>
                                            <span class="text-blue-600">$781.00</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Terms -->
                                <div class="text-sm text-gray-600 space-y-2 pt-4 border-t">
                                    <p class="font-medium text-gray-900">Terms & Conditions:</p>
                                    <ul class="list-disc pl-5 space-y-1">
                                        <li>Price includes disposal certificates for council compliance</li>
                                        <li>Payment due on completion of works</li>
                                        <li>12-month warranty on all parts and labour</li>
                                        <li>Regular maintenance schedule recommended for compliance</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Files Tab -->
                    <div id="filesTab" class="tab-content hidden">
                        <div class="bg-white rounded-lg border border-gray-200 p-6 shadow-sm">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-semibold text-gray-900">Attached Files</h3>
                                <button onclick="document.getElementById('fileUpload').click()" 
                                    class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                    <i class="fas fa-upload mr-1"></i>
                                    Upload Files
                                </button>
                                <input type="file" id="fileUpload" multiple style="display:none" onchange="handleFileUpload(event)">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition">
                                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-sm text-gray-900">Previous_Quote_2023.pdf</p>
                                        <p class="text-xs text-gray-500">245 KB â€¢ Uploaded 2 days ago</p>
                                    </div>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>

                                <div class="flex items-center gap-3 p-4 border rounded-lg hover:bg-gray-50 transition">
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-image text-blue-600 text-xl"></i>
                                    </div>
                                    <div class="flex-1">
                                        <p class="font-medium text-sm text-gray-900">Grease_Trap_Photo.jpg</p>
                                        <p class="text-xs text-gray-500">1.2 MB â€¢ Uploaded today</p>
                                    </div>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Application State
        let currentView = 'signIn';
        let currentTab = 'transcript';
        let isRecording = false;
        let recordingStartTime = null;
        let recordingInterval = null;
        
        // Sample jobs data
        const jobs = [
            { id: 1, client: 'Sarah Mitchell', address: '42 Queen St, Brisbane', status: 'quoted', updated: '2 hours ago', value: '$3,200' },
            { id: 2, client: "John's Cafe", address: '88 George St, Sydney', status: 'in_progress', updated: 'Today', active: true, value: '$781' },
            { id: 3, client: 'Brisbane Tower', address: '101 Adelaide St, Brisbane', status: 'new', updated: 'Yesterday', value: '$4,500' },
            { id: 4, client: 'Residential Complex', address: '55 Park Rd, Melbourne', status: 'completed', updated: '3 days ago', value: '$2,100' },
            { id: 5, client: 'City Mall', address: '200 Collins St, Melbourne', status: 'quoted', updated: '3 days ago', value: '$5,800' },
            { id: 6, client: 'Beach Resort', address: '15 Ocean Drive, Gold Coast', status: 'completed', updated: '1 week ago', value: '$1,450' }
        ];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            renderJobs();
        });

        // View Management
        function showView(view) {
            document.getElementById('signInView').classList.add('hidden');
            document.getElementById('dashboardView').classList.add('hidden');
            document.getElementById('jobDetailView').classList.add('hidden');
            
            document.getElementById(view + 'View').classList.remove('hidden');
            document.getElementById(view + 'View').classList.add('fade-in');
            currentView = view;
        }

        // Tab Management
        function switchTab(tab) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            
            // Show selected tab
            document.getElementById(tab + 'Tab').classList.remove('hidden');
            document.getElementById(tab + 'Tab').classList.add('slide-in');
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('tab-active', 'text-blue-600');
                btn.classList.add('text-gray-500');
            });
            
            document.querySelector(`[data-tab="${tab}"]`).classList.remove('text-gray-500');
            document.querySelector(`[data-tab="${tab}"]`).classList.add('tab-active', 'text-blue-600');
            
            currentTab = tab;
        }

        // Recording Functions
        function toggleRecording() {
            const btn = document.getElementById('recordBtn');
            const icon = document.getElementById('recordIcon');
            const text = document.getElementById('recordText');
            const wave = document.getElementById('audioWave');
            const timer = document.getElementById('recordingTimer');
            const timeDisplay = document.getElementById('recordingTime');
            
            isRecording = !isRecording;
            
            if (isRecording) {
                btn.classList.add('pulse-record');
                icon.classList.remove('fa-microphone');
                icon.classList.add('fa-stop');
                text.textContent = 'Stop';
                wave.classList.remove('hidden');
                timer.classList.remove('hidden');
                
                // Start timer
                recordingStartTime = Date.now();
                recordingInterval = setInterval(() => {
                    const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
                    const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
                    const seconds = (elapsed % 60).toString().padStart(2, '0');
                    timeDisplay.textContent = `${minutes}:${seconds}`;
                }, 1000);
                
                // Simulate recording for 5 seconds
                setTimeout(() => {
                    if (isRecording) {
                        toggleRecording();
                        showNotification('Recording Complete', 'Audio saved successfully! Click "Summarize with AI" to process.');
                    }
                }, 5000);
            } else {
                btn.classList.remove('pulse-record');
                icon.classList.remove('fa-stop');
                icon.classList.add('fa-microphone');
                text.textContent = 'Start Recording';
                wave.classList.add('hidden');
                timer.classList.add('hidden');
                
                // Clear timer
                if (recordingInterval) {
                    clearInterval(recordingInterval);
                    recordingInterval = null;
                }
            }
        }

        // AI Summarization
        function summarizeWithAI() {
            showNotification('AI Processing', 'Transcribing audio and generating summary...');
            
            // Simulate processing
            setTimeout(() => {
                switchTab('summary');
                showNotification('Summary Ready', 'AI has generated job notes and action items');
            }, 2000);
        }

        // Job Management
        function renderJobs() {
            const jobsList = document.getElementById('jobsList');
            if (!jobsList) return;
            
            jobsList.innerHTML = jobs.map(job => {
                const statusColors = {
                    new: 'bg-blue-100 text-blue-700',
                    quoted: 'bg-yellow-100 text-yellow-700',
                    in_progress: 'bg-green-100 text-green-700',
                    completed: 'bg-gray-100 text-gray-700'
                };
                
                return `
                    <div onclick="selectJob(${job.id})" 
                        class="p-3 rounded-lg hover:bg-gray-50 cursor-pointer transition ${job.active ? 'bg-blue-50 border border-blue-200' : ''}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="font-medium text-sm text-gray-900">${job.client}</div>
                                <div class="text-xs text-gray-500">${job.address}</div>
                            </div>
                            <div class="text-xs font-bold text-green-600">${job.value}</div>
                        </div>
                        <div class="flex items-center gap-2 mt-2">
                            <span class="px-2 py-0.5 text-xs rounded ${statusColors[job.status]}">
                                ${job.status.replace('_', ' ')}
                            </span>
                            <span class="text-xs text-gray-400">${job.updated}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function selectJob(jobId) {
            const job = jobs.find(j => j.id === jobId);
            if (job) {
                document.getElementById('jobClientName').textContent = job.client;
                document.getElementById('jobAddress').textContent = job.address;
                showView('jobDetail');
            }
        }

        function createNewJob() {
            const clientName = prompt('Client Name:');
            if (clientName) {
                const address = prompt('Job Address:');
                if (address) {
                    const newJob = {
                        id: jobs.length + 1,
                        client: clientName,
                        address: address,
                        status: 'new',
                        updated: 'Just now',
                        value: '$0'
                    };
                    jobs.unshift(newJob);
                    renderJobs();
                    showNotification('Job Created', `New job for ${clientName} has been created`);
                    selectJob(newJob.id);
                }
            }
        }

        function searchJobs(query) {
            const filtered = jobs.filter(job => 
                job.client.toLowerCase().includes(query.toLowerCase()) ||
                job.address.toLowerCase().includes(query.toLowerCase())
            );
            
            const jobsList = document.getElementById('jobsList');
            if (filtered.length === 0) {
                jobsList.innerHTML = '<div class="p-4 text-center text-sm text-gray-500">No jobs found</div>';
            } else {
                renderJobs(); // In real app, would render filtered results
            }
        }

        // Task Management
        function addNewTask() {
            const taskText = prompt('Task description:');
            if (taskText) {
                const tasksList = document.getElementById('tasksList');
                const newTask = document.createElement('div');
                newTask.className = 'flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition';
                newTask.innerHTML = `
                    <input type="checkbox" class="w-4 h-4 text-blue-600 rounded">
                    <div class="flex-1">
                        <p class="text-gray-900">${taskText}</p>
                        <p class="text-xs text-gray-500 mt-1">
                            <i class="fas fa-calendar-alt mr-1"></i>Due: Tomorrow
                        </p>
                    </div>
                    <span class="px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded font-medium">New</span>
                `;
                tasksList.appendChild(newTask);
                showNotification('Task Added', 'New task has been created');
            }
        }

        // Utility Functions
        function updateWordCount() {
            const text = document.getElementById('transcriptText').value;
            const wordCount = text.trim().split(/\s+/).length;
            document.getElementById('wordCount').textContent = wordCount;
        }

        function copyTranscript() {
            const text = document.getElementById('transcriptText');
            text.select();
            document.execCommand('copy');
            showNotification('Copied', 'Transcript copied to clipboard');
        }

        function updateJobStatus(status) {
            showNotification('Status Updated', `Job status changed to ${status.replace('_', ' ')}`);
        }

        function saveJob() {
            showNotification('Job Saved', 'All changes have been saved successfully');
        }

        function handleAudioUpload(event) {
            const file = event.target.files[0];
            if (file) {
                showNotification('Audio Uploaded', `${file.name} uploaded successfully`);
            }
        }

        function handleFileUpload(event) {
            const files = event.target.files;
            if (files.length > 0) {
                showNotification('Files Uploaded', `${files.length} file(s) uploaded successfully`);
            }
        }

        // Notification System
        function showNotification(title, message) {
            const notification = document.getElementById('notification');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>